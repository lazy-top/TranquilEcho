<!DOCTYPE html>
<html>

<head>
  <!-- 引入 Vuetify 的 CSS -->
  <link href="../static/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="../static/css/vuetify.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body>

  <div id="app">
    <!-- App.vue 根组件 -->

    <v-app>
      <!-- 使用网格系统来组织布局 -->
      <v-row>
        <!-- 聊天室列表的导航抽屉 -->

        <v-navigation-drawer app>
          <v-list>
            <v-list-item v-for="(roomName, index) in roomNames" :key="index" @click="currentRoom = roomName">
              <!-- 列表项左侧的图标 -->
              <v-list-item-action>
                <v-icon>mdi-chat</v-icon>
              </v-list-item-action>
              <!-- 聊天室名称 -->
              <v-list-item-content>
                <v-list-item-title>{{ roomName }}</v-list-item-title>
              </v-list-item-content>
            </v-list-item>
          </v-list>
        </v-navigation-drawer>


        <!-- 主要内容区域 -->

        <v-app-bar app>
          <!-- 当前聊天室的标题 -->
          <v-toolbar-title>{{ currentRoom || '请选择一个聊天室' }}</v-toolbar-title>

          <!-- 匿名名称输入框 -->
          <v-text-field v-model="username" label="匿名名称" :rules="[rules.required]" single-line
            hide-details></v-text-field>

          <!-- 切换主题模式的按钮 -->
          <v-btn icon @click="toggleDarkTheme">
            <v-icon>{{ darkTheme ? 'mdi-white-balance-sunny' : 'mdi-weather-night' }}</v-icon>
          </v-btn>
        </v-app-bar>

        <!-- 聊天内容区域 -->
        <v-main>
          <v-container fluid>
            <!-- 消息列表 -->
            <v-list>
              <v-list-item v-for="(message, index) in messages" :key="index">
                <v-list-item-content>
                  <v-list-item-title>{{ message }}</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
            </v-list>
          </v-container>
        </v-main>

        <!-- 输入区域 -->
        <v-footer app>
          <v-row>
            <v-col cols="12">
              <!-- 带有发送表情和图片图标的输入框 -->
              <v-text-field v-model="newMessage" label="输入消息" prepend-icon="mdi-emoticon-happy-outline"
                append-icon="mdi-camera" @click:prepend="sendEmotion" @click:append="sendImage"
                @keyup.enter="sendMessage"></v-text-field>
            </v-col>
          </v-row>
        </v-footer>

      </v-row>
    </v-app>
  </div>
<style>
      #app {
      background-image: url("../static/other/pexels-iryna-olar-4252907.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
</style>
  <!-- 引入 Vue 和 Vuetify 的 JS -->
  <script src="../static/js/vue.js"></script>
  <script src="../static/js/vuetify.js"></script>
  <script src="../static/js/socket.io.min.js"></script>
  <script src="../static/js/vuex.min.js"></script>

  <script>
    new Vue({
      el: '#app',
      vuetify: new Vuetify({
        icons: {
          iconfont: 'mdi', // 默认图标集
        }, theme: { dark: false },
      }),
      data: {
        // 聊天室名称数组
        roomNames: ["心灵港湾", "抑郁症支持小组", "焦虑自助论坛", "情绪管理交流室", "压力释放空间", "自尊心建设营", "积极心态工作坊", "心理健康启航", "情感调适中心", "幸福生活讨论区"],
        currentRoom: '', // 当前选中的聊天室
        username: '', // 用户名
        messages: [], // 消息数组
        newMessage: '', // 新消息输入
        newEmotion: '', // 新表情输入
        rules:{
          required: value => !!value || '需要输入匿名名称。'

        }
      },
      methods: {
        toggleDarkTheme() {
          this.darkTheme = !this.darkTheme;
          this.$vuetify.theme.dark = this.darkTheme;
        },
        // 发送消息的方法
        sendMessage: function () {
          if (this.newMessage.trim() !== '') {
            // 将消息添加到消息列表
            this.messages.push(this.newMessage);
            // 清空输入框
            this.newMessage = '';
          }
        },
        // 发送图片的方法（待实现）
        sendImage: function () {
          // 在这里添加发送图片的逻辑
        },
        // 发送表情的方法（待实现）
        sendEmotion: function () {
          // 在这里添加发送表情的逻辑
        }
      }
    })
  </script>

</body>

</html>